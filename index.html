<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>KBook</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“˜</text></svg>">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@5.5.1/github-markdown-dark.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" />
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
      background: #0d1117;
      color: #c9d1d9;
      display: flex;
      height: 100vh;
      flex-direction: row;
    }

    #container {
      display: flex;
      flex-direction: row;
      width: 100%;
    }

    #sidebar {
      width: 20vw;
      min-width: 200px;
      max-width: 300px;
      background-color: #161b22;
      padding: 1em;
      border-right: 1px solid #30363d;
      overflow-y: auto;
    }

    #sidebar h2 {
      color: #58a6ff;
      font-size: 1.2em;
      margin-top: 0;
    }

    #toc h3 {
      margin: 1em 0 0.5em;
    }

    #toc div {
      margin-bottom: 0.5em;
    }

    #toc a {
      color: #c9d1d9;
      text-decoration: none;
    }

    #toc a:hover {
      text-decoration: underline;
    }

    #main-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    #chapter-header {
      display: flex;
      flex-direction: column;
      background: #161b22;
      padding: 15px 20px;
      z-index: 10;
    }

    #chapter-title {
      margin: 0;
      color: #58a6ff;
    }

    #chapter-source {
      margin: 0;
      color: #8b949e;
      font-family: monospace;
      font-size: 0.85em;
    }

    #content {
      flex: 1;
      overflow-y: auto;
      padding: 1em 2em;
    }

    /* Slim scrollbar */
    #sidebar, #content {
      scrollbar-width: thin;
      scrollbar-color: #30363d transparent;
    }

    /* Chrome/Safari/Edge support */
    #sidebar::-webkit-scrollbar,
    #content::-webkit-scrollbar {
      width: 6px;
    }

    #sidebar::-webkit-scrollbar-track,
    #content::-webkit-scrollbar-track {
      background: transparent;
    }

    #sidebar::-webkit-scrollbar-thumb,
    #content::-webkit-scrollbar-thumb {
      background-color: #30363d;
      border-radius: 3px;
    }

    #sidebar::-webkit-scrollbar-thumb:hover,
    #content::-webkit-scrollbar-thumb:hover {
      background-color: #484f58;
    }

    /* Responsive */
    @media (max-width: 768px) {
      body {
        flex-direction: column;
        height: auto;
      }

      #container {
        flex-direction: column;
      }

      #sidebar {
        width: 100%;
        max-height: 40vh;
        border-right: none;
        border-bottom: 1px solid #30363d;
      }

      #content {
        padding: 1em;
      }

      #chapter-header {
        padding: 10px 15px;
      }

      #chapter-title {
        font-size: 1em;
      }

      #chapter-source {
        font-size: 0.8em;
      }
    }
  </style>
</head>

<body>
  <div id="container">
    <nav id="sidebar">
      <h2>ðŸ“˜ KBook</h2>
      <div id="toc">
        
        <h3><b><a href="#" onclick="showSubChapters('chapter_1', 'Bootrepair', '1')">1. Bootrepair</a></b></h3>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('bootrepair/recover_ubuntu_bootloader.md', 'Bootrepair', 'Recover Ubuntu Bootloader')">1.1. Recover Ubuntu Bootloader</a></div>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('bootrepair/recover_windows_bootloader.md', 'Bootrepair', 'Recover Windows Bootloader')">1.2. Recover Windows Bootloader</a></div>

        <h3><b><a href="#" onclick="showSubChapters('chapter_2', 'Chroot', '2')">2. Chroot</a></b></h3>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('chroot/install_source_to_chroot.md', 'Chroot', 'Install Source To Chroot')">2.1. Install Source To Chroot</a></div>

        <h3><b><a href="#" onclick="showSubChapters('chapter_3', 'Codebrowser', '3')">3. Codebrowser</a></b></h3>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('codebrowser/doxygen.cfg', 'Codebrowser', 'Doxygen')">3.1. Doxygen</a></div>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('codebrowser/setup_codebrowser.md', 'Codebrowser', 'Setup Codebrowser')">3.2. Setup Codebrowser</a></div>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('codebrowser/setup_gnu_gtags.md', 'Codebrowser', 'Setup Gnu Gtags')">3.3. Setup Gnu Gtags</a></div>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('codebrowser/setup_opengrok.md', 'Codebrowser', 'Setup Opengrok')">3.4. Setup Opengrok</a></div>

        <h3><b><a href="#" onclick="showSubChapters('chapter_4', 'Coverage', '4')">4. Coverage</a></b></h3>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('coverage/Makefile', 'Coverage', 'Makefile')">4.1. Makefile</a></div>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('coverage/gcov.md', 'Coverage', 'Gcov')">4.2. Gcov</a></div>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('coverage/gcovr.md', 'Coverage', 'Gcovr')">4.3. Gcovr</a></div>

        <h3><b><a href="#" onclick="showSubChapters('chapter_5', 'Desktops', '5')">5. Desktops</a></b></h3>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('desktops/setup_ubuntu_desktops.md', 'Desktops', 'Setup Ubuntu Desktops')">5.1. Setup Ubuntu Desktops</a></div>

        <h3><b><a href="#" onclick="showSubChapters('chapter_6', 'Docker', '6')">6. Docker</a></b></h3>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('docker/multi-arch-image.md', 'Docker', 'Multi Arch Image')">6.1. Multi Arch Image</a></div>

        <h3><b><a href="#" onclick="showSubChapters('chapter_7', 'Gitweb', '7')">7. Gitweb</a></b></h3>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('gitweb/cgitrc', 'Gitweb', 'Cgitrc')">7.1. Cgitrc</a></div>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('gitweb/gitweb_projects.list', 'Gitweb', 'Gitweb Projects')">7.2. Gitweb Projects</a></div>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('gitweb/setup_cgit.md', 'Gitweb', 'Setup Cgit')">7.3. Setup Cgit</a></div>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('gitweb/setup_gitweb.md', 'Gitweb', 'Setup Gitweb')">7.4. Setup Gitweb</a></div>

        <h3><b><a href="#" onclick="showSubChapters('chapter_8', 'Openwrt', '8')">8. Openwrt</a></b></h3>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('openwrt/OpenWrt.md', 'Openwrt', 'Openwrt')">8.1. Openwrt</a></div>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('openwrt/PrplWrt.md', 'Openwrt', 'Prplwrt')">8.2. Prplwrt</a></div>

        <h3><b><a href="#" onclick="showSubChapters('chapter_9', 'Redmine', '9')">9. Redmine</a></b></h3>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('redmine/install_redmine_with_sqlite3.md', 'Redmine', 'Install Redmine With Sqlite3')">9.1. Install Redmine With Sqlite3</a></div>

        <h3><b><a href="#" onclick="showSubChapters('chapter_10', 'Whatsapp', '10')">10. Whatsapp</a></b></h3>
        <div style="margin-left:1em;"><a href="#" onclick="loadMarkdown('whatsapp/Decrypting_WhatsApp_Database.md', 'Whatsapp', 'Decrypting Whatsapp Database')">10.1. Decrypting Whatsapp Database</a></div>

<script>
window.chapterMap = {
  "chapter_1": [
    { index: "1.1", title: "Recover Ubuntu Bootloader", path: "bootrepair/recover_ubuntu_bootloader.md" },
    { index: "1.2", title: "Recover Windows Bootloader", path: "bootrepair/recover_windows_bootloader.md" },
  ],
  "chapter_2": [
    { index: "2.1", title: "Install Source To Chroot", path: "chroot/install_source_to_chroot.md" },
  ],
  "chapter_3": [
    { index: "3.1", title: "Doxygen", path: "codebrowser/doxygen.cfg" },
    { index: "3.2", title: "Setup Codebrowser", path: "codebrowser/setup_codebrowser.md" },
    { index: "3.3", title: "Setup Gnu Gtags", path: "codebrowser/setup_gnu_gtags.md" },
    { index: "3.4", title: "Setup Opengrok", path: "codebrowser/setup_opengrok.md" },
  ],
  "chapter_4": [
    { index: "4.1", title: "Makefile", path: "coverage/Makefile" },
    { index: "4.2", title: "Gcov", path: "coverage/gcov.md" },
    { index: "4.3", title: "Gcovr", path: "coverage/gcovr.md" },
  ],
  "chapter_5": [
    { index: "5.1", title: "Setup Ubuntu Desktops", path: "desktops/setup_ubuntu_desktops.md" },
  ],
  "chapter_6": [
    { index: "6.1", title: "Multi Arch Image", path: "docker/multi-arch-image.md" },
  ],
  "chapter_7": [
    { index: "7.1", title: "Cgitrc", path: "gitweb/cgitrc" },
    { index: "7.2", title: "Gitweb Projects", path: "gitweb/gitweb_projects.list" },
    { index: "7.3", title: "Setup Cgit", path: "gitweb/setup_cgit.md" },
    { index: "7.4", title: "Setup Gitweb", path: "gitweb/setup_gitweb.md" },
  ],
  "chapter_8": [
    { index: "8.1", title: "Openwrt", path: "openwrt/OpenWrt.md" },
    { index: "8.2", title: "Prplwrt", path: "openwrt/PrplWrt.md" },
  ],
  "chapter_9": [
    { index: "9.1", title: "Install Redmine With Sqlite3", path: "redmine/install_redmine_with_sqlite3.md" },
  ],
  "chapter_10": [
    { index: "10.1", title: "Decrypting Whatsapp Database", path: "whatsapp/Decrypting_WhatsApp_Database.md" },
  ],
};
</script>
      </div>
    </nav>
    <main id="main-area">
      <div id="chapter-header">
        <h1 id="chapter-title"></h1>
        <p id="chapter-source"></p>
      </div>
      <div id="content" class="markdown-body">
        <h2>Hello world!</h2>
        <p>Select a chapter to begin reading.</p>
      </div>
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/markdown-it@13.0.1/dist/markdown-it.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>
    const CHAPTER_DIR = "chapters";

    const md = window.markdownit({
      html: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(str, { language: lang }).value;
          } catch (_) { }
        }
        return '';
      }
    });

    function showSubChapters(chapterId, chapterTitle, chapterNum) {
      const subchapters = window.chapterMap?.[chapterId];
      const content = document.getElementById("content");
      const chapterHeader = document.getElementById("chapter-title");
      const chapterSource = document.getElementById("chapter-source");

      chapterSource.textContent = "";
      chapterHeader.textContent = `${chapterNum}. ${chapterTitle}`;

      let html = "";
      if (!subchapters || subchapters.length === 0) {
        html += `<p>No subchapters found.</p>`;
      } else {
        html += "<ul>";
        for (const item of subchapters) {
          html += `<li><a href="#" onclick="loadMarkdown('${item.path}', '${chapterTitle}', '${item.title}')">${item.index}. ${item.title}</a></li>`;
        }
        html += "</ul>";
      }

      content.innerHTML = html;
    }

    function loadMarkdown(path, chapterTitle, subTitle) {
      const header = `${chapterTitle}/${subTitle}`;
      const ext = path.split('.').pop().toLowerCase();
      const content = document.getElementById("content");
      const chapterHeader = document.getElementById("chapter-title");
      const chapterSource = document.getElementById("chapter-source");

      chapterSource.textContent = path;
      chapterHeader.textContent = header;

      fetch(`${CHAPTER_DIR}/${path}`)
        .then(res => res.text())
        .then(data => {
          if (ext === 'md') {
            content.innerHTML = md.render(data);
          } else {
            const langMap = {
              'c': 'c',
              'cpp': 'cpp',
              'py': 'python',
              'js': 'javascript',
              'html': 'html',
              'json': 'json',
              'java': 'java',
              'sh': 'bash'
            };
            const lang = langMap[ext] || '';
            const codeBlock = `<pre><code class="language-${lang}">${escapeHtml(data)}</code></pre>`;
            content.innerHTML = codeBlock;
            hljs.highlightAll();
          }
        })
        .catch(err => {
          content.innerHTML = "<p>Error loading file.</p>";
          console.error(err);
        });
    }

    function escapeHtml(str) {
      return str.replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;");
    }
  </script>
</body>

</html>
